<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Survey Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center">
        <span></span> Friend Finder </h1>
      <hr>
      <h2 class="text-center">Find your next best friend!</h2>
      <br>
      <div class="text-center">
        <a href="/tables">
          <button class="btn btn-lg btn-primary">
            <span class="fa fa-list-alt"></span> Survey </button>
        </a>
        <a href="/">
          <button class="btn btn-lg btn-default">
            <span class="fa fa-home"></span>
          </button>
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <!-- Reservation Page -->
        <div class="card">
          <div class="card-header">
            Your Profile
          </div>
          <div class="card-body">
            <form role="form">
              <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name">
              </div>
              <div class="form-group">
                <label for="image">Image for reference</label>
                <input type="text" class="form-control" id="image">
              </div>
              
              <div>
                <h3>Compatibility Survey</h3>
              </div>    
                
            <div class="chosen-container chosen-container-single">
              <label for="Q1">Question 1: How good are you with code?</label>
                <select id="Q1">
                    <option value="1">1 (not very good)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (very good)</option>
                </select>
            </div>
            <div class="chosen-container chosen-container-single">
              <label for="Q2">Question 2: Do you get frustrated often?</label>
                <select id="Q2">
                  <option value="1">1 (not very often)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very often)</option>
                </select>
            </div>
            <div class="chosen-container chosen-container-single">
              <label for="Q3">Question 3: Are you adventurous?</label>
                <select id="Q3">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
            </div>
            <div class="chosen-container chosen-container-single">
              <label for="Q4">Question 4: Do you enjoy spending time with people?</label>
                <select id="Q4">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div>
              <div class="chosen-container chosen-container-single">
                <label for="Q5">Question 5: Do you like being outside?</label>
                <select id="Q5">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div>
              <div class="chosen-container chosen-container-single">
                <label for="Q6">Question 6: Do you like being inside?</label>
                <select id="Q6">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div>
              <div class="chosen-container chosen-container-single">
                <label for="Q7">Question 7: Do you enjoy sitting around or being active?</label>
                <select id="Q7">
                  <option value="1">1 (sitting around)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (being active)</option>
                </select>
              </div>
              <div class="chosen-container chosen-container-single">
                <label for="Q8">Question 8: Do you think people should be more truthful?</label>
                <select id="Q8">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div>
              <div class="chosen-container chosen-container-single">
                <label for="Q9">Question 9: Do you get lost in thought often?</label>
                <select id="Q9">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div> 
              <div class="chosen-container chosen-container-single">
                <label for="Q10">Question 10: Are you curious?</label>
                <select id="Q10">
                  <option value="1">1 (not very)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (very)</option>
                </select>
              </div>
              <button type="submit" data-target="modal" id="submitBtn" class="btn btn-primary submit">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- // Modal firing as soon as page loads/ can't get it to display best friend or run after being fired -->
  <div id="modal" class="modal">
  <div class="modal-info">
    <h3>Meet your new Best Friend!!!</h3>
    <h4 id="matchName"></h4>
    <img id="matchPic" src="">
  </div>
  <div class="modal-foot">
    <a href="#!">Done!</a>
  </div>
</div>
<!-- // ================================================================================================= -->
<script type="text/javascript">
$(document).ready(function() {
  
  function validateForm() {
    var valid = true;
    $('.validate').each(function(){
      if($(this).val()=== ''){
        valid = false;
      }
    });
    $('.browser-default').each(function(){
      if ($(this).val() === ""){
        valid === false;
      }
    })
    return valid;
  }

  if(validateForm() === true){
    var newFriend = {
      friendName: $('#name').val().trim(),
      friendImage: $('#image').val().trim(),
      scores: [
      $("#Q1").val().trim(),
      $("#Q2").val().trim(),
      $("#Q3").val().trim(),
      $("#Q4").val().trim(),
      $("#Q5").val().trim(),
      $("#Q6").val().trim(),
      $("#Q7").val().trim(),
      $("#Q8").val().trim(),
      $("#Q9").val().trim(),
      $("#Q10").val().trim()
      ]
    };
    const currentURL = window.location.origin;

// Modal firing as soon as page loads/ can't get it to display best friend or run after being fired

    $.post(currentURL + "/api/friends", newFriend, function(data){
      $("#matchName").text(data.friendName);
      $("#matchPic").attr("src", data.friendImage);
    });
  $('.modal').modal();
// =================================================================================================
  $('#name').val("");
  $('#photo').val("");
    $('#Q1').val("");
    $('#Q2').val("");
    $('#Q3').val("");
    $('#Q4').val("");
    $('#Q5').val("");
    $('#Q6').val("");
    $('#Q7').val("");
    $('#Q8').val("");
    $('#Q9').val("");
    $('#Q10').val("");
    } else {
       alert("Please fill out ALL fields before submitting survey!")
      }
});
</script>

</body>

</html>